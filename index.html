<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
</head>
<body class="bg-secondary">
    <div class="card text-white bg-dark text-center">
        <div class="card-body">
            <h5 class="card-title">Cookeville, TN</h5>
        </div>
    </div>
    <div class="d-flex min-vh-100 justify-content-center align-items-center">
        <div class="card-group w-50">
            <div class="card text-white bg-dark text-center">
              <div class="card-body">
                <h5 class="card-title mb-2">Tempature</h5>
                <p class="card-text bi bi-thermometer" id="Temprature"></p>
              </div>
            </div>
            <div class="card text-white bg-dark text-center">
              <div class="card-body">
                <h5 class="card-title mb-2 ">Humidity</h5>
                <p class="card-text bi bi-droplet-half" id="Humidity"></p>
              </div>
            </div>
            <div class="card text-white bg-dark text-center">
              <div class="card-body">
                <h5 class="card-title mb-2">Conditions</h5>
                <div id="Conditions"></div>
              </div>
            </div>
        </div>
    </div>
    <div class="d-flex justify-content-center align-items-center">
        <p>All weather data is being pulled via the Open-Meteo Weather API. https://open-meteo.com/</p>
    </div>
</body>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<script>
// Funciton that grabs weather from open-meteo and displays it to user
async function queryWeather(){
    try {
        const objResponse = await fetch('https://api.open-meteo.com/v1/forecast?latitude=36.1628&longitude=-85.5016&current=temperature_2m,relative_humidity_2m,weather_code&temperature_unit=fahrenheit&wind_speed_unit=mph&precipitation_unit=inch&timezone=America%2FChicago',{
            method:'GET',
            headers: {
                'Content-Type':'application/json'
                },
        })

        if(!objResponse.ok){
            throw new Error(`HTTP Error Status:${objResponse.status}`)
        }

        const objData = await objResponse.json()  
        // Update HTML with Current Weather conditions pulled form fetch
        document.getElementById("Temprature").textContent = objData.current.temperature_2m + " Â°F"
        document.getElementById("Humidity").textContent = objData.current.relative_humidity_2m + " %"

        // Switch Case used for setting the current weather conditon
        switch(objData.current.weather_code) {
        case 0:
            interpretation = "<i class='bi bi-sun'></i> Clear sky";
            break;
        case 1:
            interpretation = "<i class='bi bi-cloud-sun'></i> Mainly clear";
            break;
        case 2:
            interpretation = "<i class='bi bi-cloud-sun'></i> Partly cloudy";
            break;
        case 3:
            interpretation = "<i class='bi bi-cloud'></i> Cloudy";
            break;
        case 45:
            interpretation = "<i class='bi bi-cloud-fog'></i> Fog";
            break;
        case 48:
            interpretation = "<i class='bi bi-cloud-fog'></i> Depositing rime fog";
            break;
        case 51:
            interpretation = "<i class='bi bi-droplet'></i> Light drizzle";
            break;
        case 53:
            interpretation = "<i class='bi bi-droplet'></i> Moderate drizzle";
            break;
        case 55:
            interpretation = "<i class='bi bi-droplet'></i> Heavy drizzle";
            break;
        case 61:
            interpretation = "<i class='bi bi-cloud-rain'></i> Light rain";
            break;
        case 63:
            interpretation = "<i class='bi bi-cloud-rain'></i> Moderate rain";
            break;
        case 65:
            interpretation = "<i class='bi bi-cloud-rain'></i> Heavy rain";
            break;
        case 71:
            interpretation = "<i class='bi bi-snow'></i> Light snow";
            break;
        case 73:
            interpretation = "<i class='bi bi-snow'></i> Moderate snow";
            break;
        case 75:
            interpretation = "<i class='bi bi-snow'></i> Heavy snow";
            break;
        case 77:
            interpretation = "<i class='bi bi-snow'></i> Snow grains";
            break;
        case 80:
            interpretation = "<i class='bi bi-cloud-rain-heavy'></i> Light shower rain";
            break;
        case 81:
            interpretation = "<i class='bi bi-cloud-rain-heavy'></i> Moderate shower rain";
            break;
        case 82:
            interpretation = "<i class='bi bi-cloud-rain-heavy'></i> Heavy shower rain";
            break;
        case 85:
            interpretation = "<i class='bi bi-cloud-snow'></i> Light snow showers";
            break;
        case 86:
            interpretation = "<i class='bi bi-cloud-snow'></i> Heavy snow showers";
            break;
        case 95:
            interpretation = "<i class='bi bi-cloud-lightning'></i> Thunderstorm";
            break;
        case 96:
            interpretation = "<i class='bi bi-cloud-lightning-rain'></i> Thunderstorm with hail";
            break;
        case 99:
            interpretation = "<i class='bi bi-cloud-lightning-rain'></i> Thunderstorm with heavy hail";
            break;
        default:
            interpretation = "<i class='bi bi-question-circle'></i> Unknown weather code";
    }


    // Update the text content of the <p> tag with id="conditions"
    document.getElementById("Conditions").innerHTML = interpretation
        
    } catch(objError){
        console.log('Error fetching objData',objError)
        }
}

// Function Call for queryWeather()
queryWeather()

// AI Use
// I used AI to save time by generating the switch case for updating the weather condtion, I used ChatGPT for this
</script>
</html>


